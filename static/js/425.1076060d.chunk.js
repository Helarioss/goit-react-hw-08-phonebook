"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[425],{425:function(e,n,r){r.r(n),r.d(n,{default:function(){return E}});var a,t,s,o=r(1889),i=r(5861),c=r(885),l=r(7757),d=r.n(l),u=r(5206),m=r(5705),h=r(1089),f=r(9298),x=r(4554),p=r(790),v=r(6151),b=r(3329),Z=function(){var e=(0,f.wY)().data,n=(0,f.Tn)(),r=(0,c.Z)(n,2),a=r[0],t=r[1].isLoading,s=function(){var n=(0,i.Z)(d().mark((function n(r){return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!e.find((function(e){return e.name.toLocaleLowerCase()===l.values.name.toLocaleLowerCase()}))){n.next=3;break}throw new Error("".concat(l.values.name," is already in contacts"));case 3:return n.next=5,a(r);case 5:if(!n.sent.error){n.next=8;break}throw new Error("Failed to add contact");case 8:u.Am.success("Contact added successfully"),l.handleReset(),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(0),u.Am.error(n.t0.message);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e){return n.apply(this,arguments)}}(),o=new RegExp("\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}"),l=(0,m.TA)({initialValues:{name:"",number:""},validationSchema:h.Ry({name:h.Z_().matches("^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$","Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan").required("Required"),number:h.Z_().matches(o,"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +").max(13).required("Required")}),onSubmit:s});return(0,b.jsxs)(x.Z,{component:"form",onSubmit:l.handleSubmit,sx:{mt:1,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,b.jsx)(p.Z,{margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",value:l.values.name,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.name&&l.errors.name),helperText:l.touched.name&&l.errors.name}),(0,b.jsx)(p.Z,{margin:"normal",required:!0,fullWidth:!0,name:"number",label:"Number",type:"tel",id:"number",value:l.values.number,onChange:l.handleChange,onBlur:l.handleBlur,error:Boolean(l.touched.number&&l.errors.number),helperText:l.touched.number&&l.errors.number}),(0,b.jsx)(v.Z,{type:"submit",variant:"contained",sx:{mt:3,mb:2,textAlign:"center"},disabled:t,children:"Add contact"})]})},g=r(1413),j=r(873),w=r(2791),C=r(5048),y=r(4808),A=r(4852),k=r(3400),z=r(6259),P=r(7247),_=function(e){var n=e.id,r=e.name,a=e.number,t=(0,f.Nt)(),s=(0,c.Z)(t,2),o=s[0],i=s[1],l=i.isLoading,d=i.isSuccess;return(0,w.useEffect)((function(){d&&u.Am.success("The contact was successfully deleted")}),[d]),(0,b.jsx)(A.ZP,{secondaryAction:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(k.Z,{edge:"end","aria-label":"delete",disabled:l,onClick:function(){return o(n)},children:(0,b.jsx)(P.Z,{})})}),children:(0,b.jsx)(z.Z,{primary:r,secondary:a})})},L=r(493),B=r(9731),S=function(){var e=function(){var e=(0,C.v9)(y.zK),n=(0,w.useMemo)((function(){return(0,j.P1)([function(e){return e.data},function(e,n){return n}],(function(e,n){var r;return null!==(r=null===e||void 0===e?void 0:e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).reverse())&&void 0!==r?r:[]}))}),[]);return(0,f.wY)(void 0,{selectFromResult:function(r){return(0,g.Z)((0,g.Z)({},r),{},{filteredContacts:n(r,e)})}})}(),n=e.data,r=e.filteredContacts,a=e.error;return e.isLoading?(0,b.jsx)(B.$,{height:120,width:120}):a?(0,b.jsx)("p",{children:"Failed to load contacts"}):0===(null===n||void 0===n?void 0:n.length)?(0,b.jsx)("p",{children:"No contacts"}):(0,b.jsx)(L.Z,{sx:{overflow:"auto",maxHeight:350},children:null===r||void 0===r?void 0:r.map((function(e){return(0,b.jsx)(_,(0,g.Z)({},e),e.id)}))})},q=function(){var e=(0,C.v9)(y.zK),n=(0,C.I0)();return(0,b.jsx)(p.Z,{fullWidth:!0,id:"standard-search",label:"Search",type:"search",variant:"standard",name:"filter",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",value:e,onChange:function(e){n((0,y.a8)(e.target.value))}})},F=r(168),N=r(7939),R=(N.ZP.div(a||(a=(0,F.Z)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n"]))),N.ZP.h1(t||(t=(0,F.Z)(["\n  text-align: center;\n  margin-top: 30px;\n"])))),T=N.ZP.h2(s||(s=(0,F.Z)(["\n  margin: 25px 0;\n"]))),E=function(){return(0,b.jsxs)("div",{children:[(0,b.jsx)(R,{children:"Phonebook"}),(0,b.jsxs)(o.ZP,{container:!0,direction:"row",justifyContent:"center",alignItems:"flex-start",columnSpacing:12,children:[(0,b.jsxs)(o.ZP,{item:!0,xs:3,children:[(0,b.jsx)(T,{children:"Create contact"}),(0,b.jsx)(Z,{})]}),(0,b.jsxs)(o.ZP,{item:!0,xs:3,children:[(0,b.jsx)(T,{children:"Contacts"}),(0,b.jsx)(q,{}),(0,b.jsx)(S,{})]})]})]})}}}]);
//# sourceMappingURL=425.1076060d.chunk.js.map